<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 ðŸ’» Essentials of Data Wrangling in R for Healthcare Data | Statistics &amp; Big Data 24-25 Labs</title>
<meta name="author" content="Dr.Â NiccolÃ² Salvini">
<meta name="description" content="Data wrangling, also known as data cleaning, involves the preparation steps prior to fitting any statistical model. This is essential since healthcare data often comes in a raw, messy format, and...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 5 ðŸ’» Essentials of Data Wrangling in R for Healthcare Data | Statistics &amp; Big Data 24-25 Labs">
<meta property="og:type" content="book">
<meta property="og:description" content="Data wrangling, also known as data cleaning, involves the preparation steps prior to fitting any statistical model. This is essential since healthcare data often comes in a raw, messy format, and...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 5 ðŸ’» Essentials of Data Wrangling in R for Healthcare Data | Statistics &amp; Big Data 24-25 Labs">
<meta name="twitter:description" content="Data wrangling, also known as data cleaning, involves the preparation steps prior to fitting any statistical model. This is essential since healthcare data often comes in a raw, messy format, and...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.23/datatables.js"></script><link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link rel="shortcut icon" href="images/cattolica-logo-favicon.png">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Statistics &amp; Big Data 24-25 Labs</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled"><li><a class="" href="index.html"><span class="header-section-number">Chapter 5</span> ðŸ’» Essentials of Data Wrangling in R for Healthcare Data</a></li></ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://sbd-labs-22-23.netlify.app">View book source <i class="fab fa-gitlab"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="essentials-of-data-wrangling-in-r-for-healthcare-data" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> ðŸ’» Essentials of Data Wrangling in R for Healthcare Data<a class="anchor" aria-label="anchor" href="#essentials-of-data-wrangling-in-r-for-healthcare-data"><i class="fas fa-link"></i></a>
</h1>
<p>Data wrangling, also known as data cleaning, involves the preparation steps prior to fitting any statistical model. This is essential since healthcare data often comes in a raw, messy format, and we usually donâ€™t need all the data available. We might only need a subset, such as specific rows or columns.</p>
<p>In this tutorial, we will learn how to clean and wrangle healthcare-related datasets using both base R and the <code>dplyr</code> package.</p>
<div id="basic-operations-in-r" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> 1. Basic Operations in R<a class="anchor" aria-label="anchor" href="#basic-operations-in-r"><i class="fas fa-link"></i></a>
</h2>
<p>Letâ€™s start with some simple operations:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="fl">12</span> <span class="op">/</span> <span class="fl">7</span></span>
<span><span class="co">#&gt; [1] 1.714286</span></span></code></pre></div>
<p>You can store the result into objects:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span></span>
<span><span class="va">result</span></span>
<span><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Print the result:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Modify the result:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="va">result</span> <span class="op">*</span> <span class="fl">3.1415</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 25.132</span></span></code></pre></div>
</div>
<div id="working-with-vectors" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> 2. Working with Vectors<a class="anchor" aria-label="anchor" href="#working-with-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>Vectors are a fundamental data structure in R. Letâ€™s create a vector of blood pressure readings:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">blood_pressure</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">135</span>, <span class="fl">142</span>, <span class="fl">130</span>, <span class="fl">125</span><span class="op">)</span></span>
<span><span class="va">blood_pressure</span></span>
<span><span class="co">#&gt; [1] 120 135 142 130 125</span></span></code></pre></div>
<div id="accessing-vector-elements" class="section level3" number="5.2.1">
<h3>
<span class="header-section-number">5.2.1</span> Accessing Vector Elements<a class="anchor" aria-label="anchor" href="#accessing-vector-elements"><i class="fas fa-link"></i></a>
</h3>
<p>You can access elements in a vector using square brackets <code>[]</code>. For example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_reading</span> <span class="op">&lt;-</span> <span class="va">blood_pressure</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">first_three</span> <span class="op">&lt;-</span> <span class="va">blood_pressure</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">first_reading</span><span class="op">)</span>  <span class="co"># Output: [1] 120</span></span>
<span><span class="co">#&gt; [1] 120</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">first_three</span><span class="op">)</span>    <span class="co"># Output: [1] 120 135 142</span></span>
<span><span class="co">#&gt; [1] 120 135 142</span></span></code></pre></div>
</div>
<div id="conditional-subsetting" class="section level3" number="5.2.2">
<h3>
<span class="header-section-number">5.2.2</span> Conditional Subsetting<a class="anchor" aria-label="anchor" href="#conditional-subsetting"><i class="fas fa-link"></i></a>
</h3>
<p>Letâ€™s select only the readings greater than 130:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">high_bp</span> <span class="op">&lt;-</span> <span class="va">blood_pressure</span><span class="op">[</span><span class="va">blood_pressure</span> <span class="op">&gt;</span> <span class="fl">130</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">high_bp</span><span class="op">)</span>  <span class="co"># Output: [1] 135 142 130</span></span>
<span><span class="co">#&gt; [1] 135 142</span></span></code></pre></div>
</div>
</div>
<div id="data-frames" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> 3. Data Frames<a class="anchor" aria-label="anchor" href="#data-frames"><i class="fas fa-link"></i></a>
</h2>
<p>Data frames are similar to tables or spreadsheets, making them suitable for storing patient data. Letâ€™s create a simple data frame:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">patients</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Alice"</span>, <span class="st">"Bob"</span><span class="op">)</span>,</span>
<span>  Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">25</span>, <span class="fl">28</span><span class="op">)</span>,</span>
<span>  BloodPressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">130</span>, <span class="fl">125</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">patients</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID  Name Age BloodPressure</span></span>
<span><span class="co">#&gt; 1  1  John  30           120</span></span>
<span><span class="co">#&gt; 2  2 Alice  25           130</span></span>
<span><span class="co">#&gt; 3  3   Bob  28           125</span></span></code></pre></div>
<div id="accessing-data-frame-elements" class="section level3" number="5.3.1">
<h3>
<span class="header-section-number">5.3.1</span> Accessing Data Frame Elements<a class="anchor" aria-label="anchor" href="#accessing-data-frame-elements"><i class="fas fa-link"></i></a>
</h3>
<p>You can access elements in a data frame using the <code>$</code> operator:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">patient_names</span> <span class="op">&lt;-</span> <span class="va">patients</span><span class="op">$</span><span class="va">Name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">patient_names</span><span class="op">)</span>  <span class="co"># Output: [1] "John" "Alice" "Bob"</span></span>
<span><span class="co">#&gt; [1] "John"  "Alice" "Bob"</span></span></code></pre></div>
<p>Or using square brackets:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">first_patient</span> <span class="op">&lt;-</span> <span class="va">patients</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">first_patient</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID Name Age BloodPressure</span></span>
<span><span class="co">#&gt; 1  1 John  30           120</span></span></code></pre></div>
</div>
</div>
<div id="data-manipulation-with-dplyr" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> 4. Data Manipulation with <code>dplyr</code><a class="anchor" aria-label="anchor" href="#data-manipulation-with-dplyr"><i class="fas fa-link"></i></a>
</h2>
<p>The <code>dplyr</code> package provides a more intuitive way to manipulate data. Letâ€™s load it and use it to filter and select data:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter patients with blood pressure &gt; 125</span></span>
<span><span class="va">high_bp_patients</span> <span class="op">&lt;-</span> <span class="va">patients</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">BloodPressure</span> <span class="op">&gt;</span> <span class="fl">125</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">high_bp_patients</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID  Name Age BloodPressure</span></span>
<span><span class="co">#&gt; 1  2 Alice  25           130</span></span></code></pre></div>
<div id="selecting-columns" class="section level3" number="5.4.1">
<h3>
<span class="header-section-number">5.4.1</span> Selecting Columns<a class="anchor" aria-label="anchor" href="#selecting-columns"><i class="fas fa-link"></i></a>
</h3>
<p>You can select specific columns using <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">names_and_age</span> <span class="op">&lt;-</span> <span class="va">patients</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Name</span>, <span class="va">Age</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">names_and_age</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Name Age</span></span>
<span><span class="co">#&gt; 1  John  30</span></span>
<span><span class="co">#&gt; 2 Alice  25</span></span>
<span><span class="co">#&gt; 3   Bob  28</span></span></code></pre></div>
</div>
</div>
<div id="data-cleaning" class="section level2" number="5.5">
<h2>
<span class="header-section-number">5.5</span> 5. Data Cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"><i class="fas fa-link"></i></a>
</h2>
<div id="dealing-with-missing-values" class="section level3" number="5.5.1">
<h3>
<span class="header-section-number">5.5.1</span> Dealing with Missing Values<a class="anchor" aria-label="anchor" href="#dealing-with-missing-values"><i class="fas fa-link"></i></a>
</h3>
<p>Letâ€™s add some missing values to our data:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">patients</span><span class="op">$</span><span class="va">BloodPressure</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">patients</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID  Name Age BloodPressure</span></span>
<span><span class="co">#&gt; 1  1  John  30           120</span></span>
<span><span class="co">#&gt; 2  2 Alice  25            NA</span></span>
<span><span class="co">#&gt; 3  3   Bob  28           125</span></span></code></pre></div>
<p>Use <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> to check for missing values and <code><a href="https://rdrr.io/r/stats/na.fail.html">na.omit()</a></code> to remove them:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">missing_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">patients</span><span class="op">$</span><span class="va">BloodPressure</span><span class="op">)</span></span>
<span><span class="va">cleaned_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">patients</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">missing_values</span><span class="op">)</span>  <span class="co"># Output: [1] FALSE  TRUE FALSE</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">cleaned_data</span><span class="op">)</span>    <span class="co"># Only rows with complete data</span></span>
<span><span class="co">#&gt;   ID Name Age BloodPressure</span></span>
<span><span class="co">#&gt; 1  1 John  30           120</span></span>
<span><span class="co">#&gt; 3  3  Bob  28           125</span></span></code></pre></div>
</div>
</div>
<div id="merging-data-frames" class="section level2" number="5.6">
<h2>
<span class="header-section-number">5.6</span> 6. Merging Data Frames<a class="anchor" aria-label="anchor" href="#merging-data-frames"><i class="fas fa-link"></i></a>
</h2>
<p>Sometimes, youâ€™ll need to combine patient data from different sources. Use the <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> function:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Patient details</span></span>
<span><span class="va">patient_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Alice"</span>, <span class="st">"Bob"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Patient records</span></span>
<span><span class="va">patient_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  BloodPressure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">125</span>, <span class="fl">135</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Merge on "ID"</span></span>
<span><span class="va">merged_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">patient_details</span>, <span class="va">patient_records</span>, by <span class="op">=</span> <span class="st">"ID"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">merged_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ID  Name BloodPressure</span></span>
<span><span class="co">#&gt; 1  1  John           120</span></span>
<span><span class="co">#&gt; 2  2 Alice            NA</span></span>
<span><span class="co">#&gt; 3  3   Bob           125</span></span>
<span><span class="co">#&gt; 4  4  &lt;NA&gt;           135</span></span></code></pre></div>
</div>
<div id="summarizing-data" class="section level2" number="5.7">
<h2>
<span class="header-section-number">5.7</span> 7. Summarizing Data<a class="anchor" aria-label="anchor" href="#summarizing-data"><i class="fas fa-link"></i></a>
</h2>
<p>Calculate summary statistics for the blood pressure of patients:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">patients</span><span class="op">$</span><span class="va">BloodPressure</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span></span>
<span><span class="co">#&gt;   120.0   121.2   122.5   122.5   123.8   125.0       1</span></span></code></pre></div>
<p>Or use <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> from <code>dplyr</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bp_summary</span> <span class="op">&lt;-</span> <span class="va">patients</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    mean_bp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">BloodPressure</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    sd_bp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">BloodPressure</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">bp_summary</span><span class="op">)</span></span>
<span><span class="co">#&gt;   mean_bp    sd_bp</span></span>
<span><span class="co">#&gt; 1   122.5 3.535534</span></span></code></pre></div>
</div>
<div id="visualization-with-ggplot2" class="section level2" number="5.8">
<h2>
<span class="header-section-number">5.8</span> 8. Visualization with <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#visualization-with-ggplot2"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, letâ€™s visualize the data. First, install and load <code>ggplot2</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("ggplot2")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a simple scatter plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">patients</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Age</span>, y <span class="op">=</span> <span class="va">BloodPressure</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Age vs. Blood Pressure"</span>, x <span class="op">=</span> <span class="st">"Age"</span>, y <span class="op">=</span> <span class="st">"Blood Pressure"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="05bis-lab-data-wrangling_files/figure-html/unnamed-chunk-18-1.png" width="100%"></div>
</div>
<div id="exercises" class="section level2" number="5.9">
<h2>
<span class="header-section-number">5.9</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises"><i class="fas fa-link"></i></a>
</h2>
<div class="exercise">
<p><span id="exr:dw1" class="exercise"><strong>Exercise 5.1  </strong></span>Given a vector of numeric data representing cholesterol levels, access and print the third and fifth elements.</p>
<pre><code>cholesterol_levels &lt;- c(180, 220, 195, 250, 205)</code></pre>
</div>
<div class="exercise">
<p><span id="exr:dw2" class="exercise"><strong>Exercise 5.2  </strong></span>Create a data frame for the following patient data and then print the entire data frame:</p>
<ul>
<li>Name: Emma, Oliver, Ava</li>
<li>Age: 45, 50, 37</li>
<li>BMI: 22.5, 28.7, 25.3</li>
</ul>
</div>
<div class="exercise">
<p><span id="exr:dw3" class="exercise"><strong>Exercise 5.3  </strong></span>Using the data frame <code>patients</code>, filter and print only the rows where <code>BloodPressure</code> is greater than 125.</p>
</div>
<div class="exercise">
<p><span id="exr:dw4" class="exercise"><strong>Exercise 5.4  </strong></span>From the given data frame, select and print the <code>Name</code> and <code>Age</code> columns using <code>dplyr</code>â€™s <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function.</p>
</div>
<div class="exercise">
<p><span id="exr:dw5" class="exercise"><strong>Exercise 5.5  </strong></span>Create a data frame with patient IDs and blood pressure readings. Introduce some <code>NA</code> values, then use <code><a href="https://rdrr.io/r/stats/na.fail.html">na.omit()</a></code> to remove them and print the cleaned data frame.</p>
</div>
<div class="exercise">
<p><span id="exr:dw6" class="exercise"><strong>Exercise 5.6  </strong></span>Create two data frames: one with patient IDs and ages, and another with patient IDs and cholesterol levels. Merge them using the <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> function.</p>
</div>
<div class="exercise">
<p><span id="exr:dw7" class="exercise"><strong>Exercise 5.7  </strong></span>Using the data frame <code>patients</code>, calculate the mean and standard deviation of the <code>BloodPressure</code> column.</p>
</div>
<div class="exercise">
<p><span id="exr:dw8" class="exercise"><strong>Exercise 5.8  </strong></span>Create a scatter plot of Age vs.Â BMI using <code>ggplot2</code> for the data frame created in Exercise 2.</p>
</div>
</div>
<div id="solutions" class="section level2" number="5.10">
<h2>
<span class="header-section-number">5.10</span> Solutions<a class="anchor" aria-label="anchor" href="#solutions"><i class="fas fa-link"></i></a>
</h2>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw1">5.1</a></strong>:</p>
<pre><code>element3 &lt;- cholesterol_levels[3]
element5 &lt;- cholesterol_levels[5]

print(element3)  # Output: [1] 195
print(element5)  # Output: [1] 205</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw2">5.2</a></strong>:</p>
<pre><code>patient_data &lt;- data.frame(
    Name = c("Emma", "Oliver", "Ava"),
    Age = c(45, 50, 37),
    BMI = c(22.5, 28.7, 25.3)
)

print(patient_data)</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw3">5.3</a></strong>:</p>
<pre><code>high_bp_patients &lt;- subset(patients, BloodPressure &gt; 125)
print(high_bp_patients)</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw4">5.4</a></strong>:</p>
<pre><code>names_and_ages &lt;- patients %&gt;%
    select(Name, Age)
print(names_and_ages)</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw5">5.5</a></strong>:</p>
<pre><code>patient_bp &lt;- data.frame(
    ID = 1:5,
    BloodPressure = c(120, 130, NA, 140, NA)
)

cleaned_bp &lt;- na.omit(patient_bp)
print(cleaned_bp)</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw6">5.6</a></strong>:</p>
<pre><code>patient_ages &lt;- data.frame(
    ID = c(1, 2, 3),
    Age = c(30, 25, 28)
)

patient_chol &lt;- data.frame(
    ID = c(2, 3, 4),
    Cholesterol = c(220, 195, 250)
)

merged_data &lt;- merge(patient_ages, patient_chol, by = "ID", all = TRUE)
print(merged_data)</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw7">5.7</a></strong>:</p>
<pre><code>bp_summary &lt;- patients %&gt;%
    summarise(
        mean_bp

 = mean(BloodPressure, na.rm = TRUE),
            sd_bp = sd(BloodPressure, na.rm = TRUE)
        )
    print(bp_summary)</code></pre>
</div>
<div class="answer">
<p><strong>Answer to Exercise <a href="essentials-of-data-wrangling-in-r-for-healthcare-data.html#exr:dw8">5.8</a></strong>:</p>
<pre><code>ggplot(patient_data, aes(x = Age, y = BMI)) +
    geom_point() +
    labs(title = "Age vs. BMI", x = "Age", y = "BMI")</code></pre>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="empty"></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Statistics &amp; Big Data 24-25 Labs</strong>" was written by Dr.Â NiccolÃ² Salvini. It was last built on 2024-09-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
